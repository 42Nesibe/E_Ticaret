<?php/** * Created by PhpStorm. * User: cihan * Date: 2.07.2016 * Time: 15:32 */$dir = $_SERVER["DOCUMENT_ROOT"];?><body class="hold-transition skin-blue sidebar-mini"><div class="wrapper">    <?php include(dirname(dirname(__FILE__))."/include/header.php");?>    <?php include($dir."/$conf->admin_path/include/sidebar.php");?>    <!-------------------------------------İçerik sayfası kodları buraya gelecek----------------------------------------->    <div class="content-wrapper">        <!-------------------------------------İçerik sayfası Üst kodları buraya gelecek--------------------------------->        <section class="content-header">            <h1>                Fotoğraf Galerisi                <small>Kontrol paneli</small>            </h1>            <ol class="breadcrumb">                <li><a href="/<?php echo $conf->admin_path;?>/index.php"><i class="fa fa-dashboard"></i> Anasayfa</a></li>                <li class="active">foto galeri kontrol paneli</li>            </ol>        </section>        <!-------------------------------------İçerik sayfası Üst kodları burda bitecek---------------------------------->        <!-------------------------------------İçerik sayfası içerik kodları buraya gelecek------------------------------>        <section class="content">            <div class="row">                <div class="col-md-12">                    <!-- Kullanıcı denetimi -->                    <div class="box box-info center">                        <div class="box-header">                            <h3 class="box-title">Foto galeri İşlem paneli</h3>                        </div>                        <!-------------------kullanıcı kaydetme ve load dosyası üzerinden düzenleme divi--------------->                        <div class="box-body">                            <div id="myId" class="dropzone">                            </div>                        </div>                    </div>                    <!-- Kullanıcı denetimi bitiş -->                </div>            </div>        </section>        <!-------------------------------------İçerik sayfası içerik kodları burda bitecek------------------------------>    </div>    <?php include($dir."/$conf->admin_path/include/footer.php");?>    <?php include($dir."/$conf->admin_path/include/alt_sidebar.php");?>    <?php include($dir."/$conf->admin_path/include/js.php");?>    <script src="/<?php echo $conf->admin_path?>/dist/js/dropzone.js"></script>    <script type="text/javascript">        Dropzone.autoDiscover = false;        var myDropzone = new Dropzone("#myId",{            url:'/<?php echo $conf->admin_path; ?>/multipleResim.php',            maxFilesize: 3,            addRemoveLinks: true,            acceptedFiles: 'image/*',            removedfile: function(file) {                $.ajax({                    type: 'GET',                    url: '/<?php echo $conf->admin_path; ?>/genel/data.php?islem=foto_galeri_sil&resim='+file.name,                    data: "resim="+file.name,                    dataType: 'html'                });                var _ref;                return (_ref = file.previewElement) != null ? _ref.parentNode.removeChild(file.previewElement) : void 0;            }        });        myDropzone.removeAllFiles();        // popup kapatip acildiginda tüm resimleri bosalt...        $("#myId").empty().append('<div id="qqdrpzn" class="dz-default dz-message"><span>Dosya veya Resim Yüklemek İçin Buraya Tıklayınız veya Sürükleyin... </span></div>').removeClass("dz-started");        myDropzone.on("addedfile", function (file) {            console.debug("added a file: " + file.name); // Eklenen sayfa adi...            this.options.url = "/<?php echo $conf->admin_path; ?>/multipleResim.php?islem=foto_galeri"; // dinamatik urlye baglıyorum. parametre gönderiyorum..            console.log(this.options.url);        });        $.getJSON("/<?php echo $conf->admin_path; ?>/genel/data.php?islem=foto_galeri",            function(sonuc){                console.log(sonuc);                $.each(sonuc, function(item,value){                    var cikti = { name : value.name, size: value.size }                    myDropzone.options.addedfile.call(myDropzone, cikti); // resim adini ve boyutunu işliyorum                    myDropzone.options.thumbnail.call(myDropzone, cikti, "../../images/galeri/b/"+cikti.name);  // resmin kendisini thumbnail olarak işliyorum..                });            });        myDropzone.on("complete", function(file) {            console.log(file);            if(file.status !="error") {                this.removeFile(file); // eklenen resmi siliyoruz..                // multipleResim.php dosyasındaki callback ettigim resim isimlerini ve dosya boyutunu işliyorum..                var cikti = JSON.parse(file["xhr"].response);                console.log(cikti); // data hali.                console.log(cikti.name); // resim adi..                this.options.addedfile.call(this, cikti); // resim adini ve boyutunu işliyorum                this.options.thumbnail.call(this, cikti, "../../images/galeri/b/"+cikti.name);  // resmin kendisini thumbnail olarak işliyorum..            }        });    </script></body></html>